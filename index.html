<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="NYC Taxi Data Prediction: Harvard CS109 project : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>NYC Taxi Data Prediction: Harvard CS109 project</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/sdaulton/TaxiPrediction">View on GitHub</a>

          <h1 id="project_title">NYC Taxi Data Prediction: Harvard CS109 project</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/sdaulton/TaxiPrediction/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/sdaulton/TaxiPrediction/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="nyc-taxi-data-prediction-harvard-cs109-project" class="anchor" href="#nyc-taxi-data-prediction-harvard-cs109-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>NYC Taxi Data Prediction: Harvard CS109 project</h1>

<p><img src="https://github.com/sdaulton/TaxiPrediction/raw/master/images/Actual-Predicted.gif" alt="image"></p>

<p>The above image shows the predicted number of pickups on a given Monday using a random forest regressor on the the left and the actual number of pickups on the right.  The sheet number at the top of each image corresponds to the hour of the day.</p>

<h2>
<a id="the-yellow-taxicab-an-nyc-icon" class="anchor" href="#the-yellow-taxicab-an-nyc-icon" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Yellow Taxicab: an NYC Icon</h2>

<p>New York City, being the most populous city in the United States, has a vast and complex transportation system, including one of the largest subway systems in the world and a large fleet of more than 13,000 yellow and green taxis, that have become iconic subjects in photographs and movies.</p>

<p>The subway system digests the lion share of NYC's public transport use, but the 54% of NYC's residents that don't own a car and therefore rely on public transportation still take almost 200 million taxi trips per year!</p>

<h2>
<a id="440-million-taxi-trips" class="anchor" href="#440-million-taxi-trips" aria-hidden="true"><span class="octicon octicon-link"></span></a>440 million taxi trips</h2>

<p>Thanks to some FOIL requests, data about these taxi trips has been available to the public since last year, making it a data scientist's dream. We endeavoured to delve into this gold mine using 2.5 years of NYC taxi trip data - around 440 million records - going from January 2013 to June 2015.</p>

<h3>
<a id="the-data" class="anchor" href="#the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Data:</h3>

<ul>
<li>
<a href="http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml">Raw NYC Taxi Trip Data</a> </li>
</ul>

<h2>
<a id="predicting-pickup-density" class="anchor" href="#predicting-pickup-density" aria-hidden="true"><span class="octicon octicon-link"></span></a>Predicting pickup density</h2>

<p>The prime objective we had in this project was to predict the density of taxi pickups throughout New York City as it changes from day to day and hour to hour.</p>

<p>So, given a specific location, date and time, can we  predict the number of pickups in that location to a reasonably high accuracy?</p>

<h2>
<a id="to-make-transportation-more-efficient" class="anchor" href="#to-make-transportation-more-efficient" aria-hidden="true"><span class="octicon octicon-link"></span></a>To make transportation more efficient</h2>

<ol>
<li>
<strong>Taxi companies</strong>: Companies can maximize their utilization by diverting the cabs into the locations during specific times</li>
<li>
<strong>Traffic planning</strong>: Planners can use the model predictions for traffic management on specific day/time/locations. The model can be enhanced in future to incorporate features like weather, holiday etc.</li>
<li>
<strong>Data scientists</strong>: It is interesting for data scientist to see how we have modeled location data in a simple way and yet able to get reasonably good predictions</li>
</ol>

<h2>
<a id="our-approach" class="anchor" href="#our-approach" aria-hidden="true"><span class="octicon octicon-link"></span></a>Our Approach</h2>

<h3>
<a id="1-data-preparation-with-apache-spark-on-a-amazon-web-services-cluster" class="anchor" href="#1-data-preparation-with-apache-spark-on-a-amazon-web-services-cluster" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Data preparation with Apache Spark on a Amazon Web Services Cluster</h3>

<ul>
<li>We used AWS to setup a 5 node Spark cluster (each machine had 8 cores, 16 GB RAM), and configured the cluster setup to leverage maximum resources by Spark.</li>
<li>We especially used the cluster to load the 60+ GB of raw data into an Amazon S3 bucket, and to process and prepare the data for input into the Machine Learning algorithm.</li>
</ul>

<h4>
<a id="data-cleansing" class="anchor" href="#data-cleansing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data cleansing:</h4>

<ul>
<li>We had to parse 440 million records and remove dirty records (e.g. nulls, invalid geographical coordinates, etc.)</li>
<li>Feature extraction:

<ul>
<li>Location features: We used geohashing to discretize the location data. This is very important because we were able to adjust the granularity of the precision of the location (different size of rectangles) - and make predictions on these locations.</li>
<li>We also added additional features like cosine &amp; sine on some of the data fields (more information in our notebooks)</li>
<li>We grouped the entire dataset by time of the day(binned), day of the week &amp; location (geohash).</li>
</ul>
</li>
</ul>

<h3>
<a id="2--exploratory-data-analysis" class="anchor" href="#2--exploratory-data-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.  Exploratory data analysis</h3>

<ul>
<li>The data is currently available in Google BigQuery, which allowed us to explore the data directly in Tableau.</li>
</ul>

<h3>
<a id="3-machine-learning-pandasscikit-learn" class="anchor" href="#3-machine-learning-pandasscikit-learn" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Machine learning (Pandas/Scikit learn)</h3>

<ul>
<li>We used Random Forest based regression</li>
<li>The main features we used were

<ul>
<li>discretized latitude/longitude (derived back from geohashes)</li>
<li>discretized time - but encoded in 0 to 1</li>
<li>other features: number of pickups, day of week etc</li>
</ul>
</li>
<li>The model performed very well with a oefficient of determination (R-squared) on the test data of 0.9505: we attribute this success to how we modeled the data - and importantly to how the Random Forest algorithm is able to capture the complexities in the above features and come out with a great predictor.</li>
</ul>

<h3>
<a id="4-the-project-team" class="anchor" href="#4-the-project-team" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. The Project Team</h3>

<ul>
<li><a href="http://github.com/sdaulton">Samuel Daulton</a></li>
<li><a href="http://github.com/rsethur">Sethu Raman</a></li>
<li><a href="http://github.com/tijlk">Tijl Kindt</a></li>
</ul>

<h3>
<a id="5-citationscreditreferences" class="anchor" href="#5-citationscreditreferences" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Citations/Credit/References</h3>

<ol>
<li>Thanks to Harvard CS109 TF's: <a href="https://github.com/rahuldave">Rahul Dave</a> &amp; Team: we used parts of their code in multiple places: (a) Cluster setup in AWS (b) Machine learning</li>
<li>
<a href="https://github.com/hkwi/python-geohash">Geohash.py</a>: A nice geohash library</li>
</ol>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">NYC Taxi Data Prediction: Harvard CS109 project maintained by <a href="https://github.com/sdaulton">sdaulton</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
